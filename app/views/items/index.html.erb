<%# Copyright (C) 2017 Alexander Hammond %>
<%# page_title 'Items' %>

<div class="page-header">
  <h3>Items</h3>
This is a list of all items
</div>
<div>
  <h3>Amount Raised</h3>
  <% total = amount_raised %>
  <%= total %>
</div>
<h4>Items Information</h4>
<% count = @items.count %>
<% if count == 1 %>
  There is <%= count %> item.
<% else %>
  There are <%= count %> items.
<% end %>

<% sort_column = 1 %>
<table class="table table-striped table-condensed all-tools-no-show-datatable" data-sort='[[<%= sort_column %>, "asc"]]'>
  <thead>
    <th>ID</th>
    <th>Name</th>
    <th>Condition</th>
    <th>Price</th>
    <th>Description</th>
    <th>Purchase State</th>
    <th>Image</th>
    <th># Comments</th>
    <th>Comments</th>
    <th>Options</th>
  </thead>
  <tbody>
    <% @items.each do |item| %>
      <tr id="<%= dom_id item %>">
	    <td> <%= item.id %> </td>
	    <td> <%= item.item_name %> </td>
	    <td> <%= item.item_condition %> </td>
	    <td> <%= item.item_price_in_cents %> </td>
	    <td> <%= item.item_description %> </td>
	    <td> <%= item.item_purchase_state %> </td>
	    <td> <%= image_tag(item.item_image_url.to_s) %> </td>
	    <td> <%= item.comments.size %> </td>
	    <td> <%= render 'item_comments', item: item %></td>
        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_item_path(item), :class => 'btn btn-default btn-xs' %>
	<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      item_path(item),
                      :method => :delete,
                      :remote => true,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-xs btn-danger' %>
	<%= link_to "delete", item, method: :delete,
           data: { confirm: "You sure?" } %>

        </td>

    </tr>
    <% end %>
  </tbody>
</table>
